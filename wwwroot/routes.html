<!DOCTYPE html>
<html>
    <head>
        <title>AKK - Find Route</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="css/styles.css">
        <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">-->
        <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
        <script type="text/javascript" src="http://builds.handlebarsjs.com.s3.amazonaws.com/handlebars-latest.js"></script>
        <script type="text/javascript" src="js/config.js"></script>
        <script type="text/javascript" src="js/client.js"></script>
        <script type="text/javascript" src="js/routesViewModel.js"></script>
    </head>
    <body>
        <script type="text/javascript">
            var viewModel;
            $(document).ready(function () {
                var template = Handlebars.compile($("#routes-view").html());
                var client = new Client(API_ROUTE_URL, API_SECTION_URL);
                var changed = function changed() { $('#content').html(template(viewModel)); };
                viewModel = new RoutesViewModel(client, changed);
            });
        </script>
        <script id="routes-view" type="text/x-handlebars-template">
            <div class="header">
                <div class="page-title">Find Route</div>
                <!--<div class="button">
                    <span>+</span>
                </div>-->
            </div>
            <div class="header-stub"></div>
            <div class="row row-options">
                 <div class="column column-3">
                     <span class="option-title">Grade</span>
                     <select class="option-content" onchange="viewModel.changeGrade(this.value);" type="dropdown" name="section">
                         <option value="{{selectedGrade.value}}" disabled="true" selected="selected">{{selectedGrade.name}}</option>
                         {{#each grades}}
                         <option value="{{value}}">{{name}}</option>
                         {{/each}}
                     </select>
                 </div>
                 <div class="column column-3">
                     <span class="option-title">Section</span>
                     <select class="option-content" onchange="viewModel.changeSection(this.value);" type="dropdown" name="section">
                         <option value="{{selectedSection.value}}" disabled="true" selected="selected">{{selectedSection.name}}</option>
                         {{#each sections}}
                         <option value="{{value}}">{{name}}</option>
                         {{/each}}
                     </select>
                 </div>
                 <div class="column column-3">
                     <span class="option-title">Sort by</span>
                     <select class="option-content" onchange="viewModel.changeSortBy(this.value);" type="dropdown" name="sortBy">
                         <option value="{{selectedSortBy.value}}" disabled="true" selected="selected">{{selectedSortBy.name}}</option>
                         {{#each sortOptions}}
                         <option value="{{value}}">{{name}}</option>
                         {{/each}}
                     </select>
                 </div>
            </div>
            <div class="content">
                <div class="list">
                    {{#each routes}}
                    <div class="route">
                        <div class="row row-route">
                            <div class="column column-3 fl">
                                <div class="grade grade-{{grade}}">
                                    <span class="number">{{name}}</span>
                                </div>
                            </div>
                            <div class="column column-3 fl">
                                <span class="fl">Section: {{sectionName}}</span>
                            </div>
                            <div class="column column-3 fl">
                                <span class="fr">{{date}}</span>
                            </div>
                        </div>
                        <div class="row row-route">
                            <div class="column column-3">
                                <div class="grip fl">
                                    <svg viewBox="0 0 132 108" width="26" height="21" xmlns="http://www.w3.org/2000/svg">
                                        <g id="svg_1">
                                            <path id="svg_2" d="m77.3,6.65c-10.7,5.3 -33.1,15.5 -56.8,20.5c-7.6,1.6 -13.5,7.5 -14.8,15.2c-1.1,6.2 -1.7,14 -0.6,22c1.2,8.9 8.6,15.6 17.6,16.1c13.7,0.8 36.5,4.8 55.2,21.6c5.7,5.1 14.1,6.1 20.9,2.6c8.3,-4.2 19,-11.2 27.7,-22.4c5,-6.5 5.5,-15.5 0.8,-22.2c-4.4,        -6.3 -9.3,-15.9 -10.3,-28.7c-0.4,-4.5 -2.2,-8.7 -5.4,-11.8c-4.1,-4.1 -10.3,-9.4 -17.6,-13c-5.3,-2.5 -11.5,-2.5 -16.7,0.1z" fill="#{{colorOfHolds}}">
                                            </path>
                                            <path id="svg_3" d="m98.4,80.75c27.7,-10.8 1.9,-42.2 13.1,-61c-4.1,-4.1 -10.3,-9.4 -17.6,-13c-5.2,-2.6 -11.4,-2.6 -16.6,0c-10.7,5.3 -33.1,15.5 -56.8,20.5c-1.8,0.4 -3.5,1 -5,1.8l0,0c0,0 22.8,-4.7 37.6,20.5c14.6,25.1 17.6,41.9 45.3,31.2z" fill="#{{colorOfHolds}}">
                                            </path>
                                            <g id="svg_4">
                                                <circle id="svg_5" r="11.7" cy="57.25" cx="90.6" fill="#E6E7E8">
                                                </circle>
                                                <circle id="svg_6" r="7.8" cy="57.25" cx="90.6" fill="#414042">
                                                </circle>
                                            </g>
                                            <path id="svg_7" d="m126.5,82.35c2.5,-3.2 3.8,-7 4,-10.8c-8,7.9 -22,20.7 -32.1,25.2c-14.9,6.7 -26.6,-12.1 -56.1,-20.8c-14.2,-4.2 -24.9,-3.2 -32.1,-1.1c3.2,3.3 7.6,5.4 12.5,5.6c13.7,0.8 36.5,4.8 55.2,21.6c5.7,5.1 14.1,6.1 20.9,2.6c8.3,-4.1 19,-11.1 27.7,-22.3z"        fill="#{{colorOfHolds}}">
                                            </path>
                                        </g>
                                    </svg>
                                </div>
                            </div>
                            <div class="column column-3"></div>
                            <div class="column column-3">
                                <span class="fr nowrap">
                                    By {{author}}
                                </span>
                            </div>
                        </div>         
                    </div>
                    {{/each}}
                </div>
            </div>
        </script>
        <div id="content"></div>
    </body>
</html>

